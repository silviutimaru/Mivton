const fs = require('fs');

const filePath = '/Users/silviutimaru/Desktop/Mivton/public/js/video-call-fixed.js';
let content = fs.readFileSync(filePath, 'utf8');

// Define which logs should be at which level
const logReplacements = [
    // DEBUG level (verbose, only show when troubleshooting)
    { pattern: /console\.log\('üìπ Local video metadata loaded'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local video metadata loaded');" },
    { pattern: /console\.log\('üìπ Remote video metadata loaded'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video metadata loaded');" },
    { pattern: /console\.log\('‚úÖ Local video is playing'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local video is playing');" },
    { pattern: /console\.log\('‚úÖ Remote video is playing'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video is playing');" },
    { pattern: /console\.log\('‚è∏Ô∏è Local video paused'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local video paused');" },
    { pattern: /console\.log\('‚è∏Ô∏è Remote video paused'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video paused');" },
    { pattern: /console\.log\('‚úÖ Local video play started'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local video play started');" },
    { pattern: /console\.log\('‚úÖ Remote video play started'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video play started');" },
    { pattern: /console\.log\('üßä Sending ICE candidate'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Sending ICE candidate');" },
    { pattern: /console\.log\('üßä Received ICE candidate'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Received ICE candidate');" },
    { pattern: /console\.log\('‚úÖ ICE candidate added'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'ICE candidate added');" },
    { pattern: /console\.log\('üì° Connection state:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Connection state:'," },
    { pattern: /console\.log\('üßä ICE connection state:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'ICE connection state:'," },
    { pattern: /console\.log\('üì° Signaling state:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Signaling state:'," },
    { pattern: /console\.log\('üìπ Requesting user media/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Requesting user media" },
    { pattern: /console\.log\('üîÑ Clearing existing/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Clearing existing" },
    { pattern: /console\.log\('üìπ Assigning/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Assigning" },
    { pattern: /console\.log\('‚úÖ Got media stream:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Got media stream:'," },
    { pattern: /console\.log\('‚úÖ Video track is live'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Video track is live');" },
    { pattern: /console\.log\('‚úÖ Audio track is live'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Audio track is live');" },
    { pattern: /console\.log\('‚úÖ Local video stream assigned'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local video stream assigned');" },
    { pattern: /console\.log\('‚úÖ Remote video stream assigned'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video stream assigned');" },
    { pattern: /console\.log\('üì• Received offer/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Received offer" },
    { pattern: /console\.log\('üì• Received answer'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Received answer');" },
    { pattern: /console\.log\('üì• Processing offer/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Processing offer" },
    { pattern: /console\.log\('üì• Processing answer/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Processing answer" },
    { pattern: /console\.log\('üì• Setting remote description/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Setting remote description" },
    { pattern: /console\.log\('‚úÖ Remote description set/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote description set" },
    { pattern: /console\.log\('üì§ Creating offer/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Creating offer" },
    { pattern: /console\.log\('üì§ Creating answer/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Creating answer" },
    { pattern: /console\.log\('‚úÖ Local description set/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local description set" },
    { pattern: /console\.log\('‚úÖ Offer sent/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Offer sent" },
    { pattern: /console\.log\('‚úÖ Answer sent/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Answer sent" },
    { pattern: /console\.log\('‚úÖ Added local/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Added local" },
    { pattern: /console\.log\('üì• Received remote track:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Received remote track:'," },
    { pattern: /console\.log\('‚úÖ Created remote stream'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Created remote stream');" },
    { pattern: /console\.log\('‚úÖ Added remote/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Added remote" },
    { pattern: /console\.log\('‚úÖ Peer connection created'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Peer connection created');" },
    { pattern: /console\.log\('üîç /g, replacement: "vcLog(LOG_LEVEL.DEBUG, '" },
    { pattern: /console\.log\('üìπ Local video element/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Local video element" },
    { pattern: /console\.log\('üìπ Remote video element/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video element" },
    { pattern: /console\.log\('üì¶ Video container/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Video container" },
    { pattern: /console\.log\('üé• VIDEO UI CONTAINER/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'VIDEO UI CONTAINER" },
    { pattern: /console\.log\('üé¨ Showing video UI/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Showing video UI" },
    { pattern: /console\.log\('‚úÖ Video UI shown/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Video UI shown" },
    { pattern: /console\.log\('üßπ Cleaning up/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Cleaning up" },
    { pattern: /console\.log\('üõë Stopped/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Stopped" },
    { pattern: /console\.log\('üîå Peer connection closed'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Peer connection closed');" },
    { pattern: /console\.log\('‚úÖ Cleanup complete'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Cleanup complete');" },
    { pattern: /console\.log\('üé§ Audio toggled:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Audio toggled:'," },
    { pattern: /console\.log\('üìπ Video toggled:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Video toggled:'," },
    
    // INFO level (important state changes)
    { pattern: /console\.log\('üìû Video call button clicked/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Video call button clicked" },
    { pattern: /console\.log\('üé• Initiating call/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Initiating call" },
    { pattern: /console\.log\('‚úÖ Call initiation sent/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Call initiation sent" },
    { pattern: /console\.log\('‚úÖ Got user media/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Got user media" },
    { pattern: /console\.log\('‚úÖ Accepting call/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Accepting call" },
    { pattern: /console\.log\('‚ùå Declining call/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Declining call" },
    { pattern: /console\.log\('üì¥ Ending call/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Ending call" },
    { pattern: /console\.log\('‚úÖ WebRTC connected successfully!'\);?/g, replacement: "vcLog(LOG_LEVEL.INFO, 'WebRTC connected successfully!');" },
    { pattern: /console\.log\('üîî Call is ringing:',/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Call is ringing:'," },
    { pattern: /console\.log\('üìû \[New\] Incoming video call:',/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Incoming video call:'," },
    { pattern: /console\.log\('üì• Processing incoming call:',/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Processing incoming call:'," },
    { pattern: /console\.log\('üéµ Playing modern ringtone/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Playing modern ringtone" },
    { pattern: /console\.log\('üîå Setting up socket listeners/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Setting up socket listeners" },
    { pattern: /console\.log\('‚úÖ Socket listeners setup complete'\);?/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Socket listeners setup complete');" },
    { pattern: /console\.log\('üîÑ Starting WebRTC/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Starting WebRTC" },
    { pattern: /console\.log\('üîÑ Initiator starting WebRTC/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Initiator starting WebRTC" },
    { pattern: /console\.log\('üîÑ Receiver starting WebRTC/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Receiver starting WebRTC" },
    { pattern: /console\.log\('üöÄ Initializing Video Call System'\);?/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Initializing Video Call System');" },
    { pattern: /console\.log\('üîß Set window\.currentUserId/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Set window.currentUserId" },
    { pattern: /console\.log\('‚è≥ Waiting for socket/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Waiting for socket" },
    
    // WARN level
    { pattern: /console\.warn\('‚ö†Ô∏è Local video play failed/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Local video play failed" },
    { pattern: /console\.warn\('‚ö†Ô∏è Remote video play failed/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Remote video play failed" },
    { pattern: /console\.warn\('‚ö†Ô∏è Video track not live:',/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Video track not live:'," },
    { pattern: /console\.warn\('‚ö†Ô∏è Audio track not live:',/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Audio track not live:'," },
    { pattern: /console\.warn\('‚ö†Ô∏è DOM event listeners already setup/g, replacement: "vcLog(LOG_LEVEL.WARN, 'DOM event listeners already setup" },
    { pattern: /console\.warn\('‚ö†Ô∏è Socket event listeners already setup/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Socket event listeners already setup" },
    { pattern: /console\.warn\('‚ö†Ô∏è WebRTC already initialized/g, replacement: "vcLog(LOG_LEVEL.WARN, 'WebRTC already initialized" },
    { pattern: /console\.warn\('‚ö†Ô∏è Already processing an answer/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Already processing an answer" },
    { pattern: /console\.warn\('‚ö†Ô∏è Cannot set remote description, wrong state:',/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Cannot set remote description, wrong state:'," },
    { pattern: /console\.warn\('‚ö†Ô∏è Already in stable state/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Already in stable state" },
    { pattern: /console\.warn\('‚ö†Ô∏è No peer connection available/g, replacement: "vcLog(LOG_LEVEL.WARN, 'No peer connection available" },
    { pattern: /console\.warn\('‚ö†Ô∏è Already in a call/g, replacement: "vcLog(LOG_LEVEL.INFO, 'Already in a call" },
    { pattern: /console\.warn\('‚ö†Ô∏è No local stream available/g, replacement: "vcLog(LOG_LEVEL.WARN, 'No local stream available" },
    { pattern: /console\.warn\('‚ö†Ô∏è Signaling state not stable/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Signaling state not stable" },
    { pattern: /console\.warn\('‚ö†Ô∏è Cannot register user/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Cannot register user" },
    
    // ERROR level (always show)
    { pattern: /console\.error\('‚ùå/g, replacement: "vcLog(LOG_LEVEL.ERROR, '" },
    { pattern: /console\.log\('‚ùå/g, replacement: "vcLog(LOG_LEVEL.ERROR, '" },
    
    // INFO level (user-facing state changes)
    { pattern: /console\.log\('üì¢ /g, replacement: "vcLog(LOG_LEVEL.INFO, '" },
    { pattern: /console\.log\('Ringtone not available:',/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Ringtone not available:'," },
    { pattern: /console\.log\('Error closing audio context:',/g, replacement: "vcLog(LOG_LEVEL.WARN, 'Error closing audio context:'," },
    { pattern: /console\.log\('Video play error:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Video play error:'," },
    { pattern: /console\.log\('Remote video play error:',/g, replacement: "vcLog(LOG_LEVEL.DEBUG, 'Remote video play error:'," }
];

// Apply all replacements
logReplacements.forEach(({ pattern, replacement }) => {
    content = content.replace(pattern, replacement);
});

// Write back
fs.writeFileSync(filePath, content, 'utf8');

console.log('‚úÖ Log replacements complete!');
console.log('üìä Replaced console.log/warn/error with vcLog function');

